<div class="col-sm-12">
  <h3>MoabStorageRoot Information</h3>

  <p><strong class="fs-5">MoabStorageRoot</strong> records represent an on premises storage location for a Moab.</p>

  <div class="col-sm-11">
    <table class="table table-bordered table-hover table-sm">
      <thead class="table-info">
        <tr>
          <th class="col-2">root name</th>
          <th class="col-4">storage location</th>
          <th class="col-1">total size</th>
          <th class="col-1">average size</th>
          <th class="col-1">moab count</th>
          <% status_labels.map do |status| %>
            <th class="col-sm-1 text-center"><%=status %></th>
          <% end %>
          <th class="col-sm-1">expired checksum audit</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% storage_root_info.each do |root_name, info| %>
          <tr>
            <td><%= root_name %></td>
            <td><%= info[:storage_location] %></td>
            <td><%= info[:total_size] %></td>
            <td><%= info[:average_size] %></td>
            <td class="text-end"><%= info[:moab_count] %></td>
            <td class="text-end"><%= info[:ok_count] %></td>
            <td class="text-end<%= ' table-danger' if info[:invalid_moab_count].positive? %>"><%= info[:invalid_moab_count] %></td>
            <td class="text-end<%= ' table-danger' if info[:invalid_checksum_count].positive? %>"><%= info[:invalid_checksum_count] %></td>
            <td class="text-end<%= ' table-danger' if info[:moab_not_found_count].positive? %>"><%= info[:moab_not_found_count] %></td>
            <td class="text-end<%= ' table-danger' if info[:unexpected_version_count].positive? %>"><%= info[:unexpected_version_count] %></td>
            <td class="text-end<%= ' table-danger' if info[:validity_unknown_count].positive? %>"><%= info[:validity_unknown_count] %></td>
            <td class="text-end<%= ' table-warning' if info[:fixity_check_expired_count].positive? %>"><%= info[:fixity_check_expired_count] %></td>
          </tr>
        <% end %>
      </tbody>
      <tfoot class="table-group-divider">
        <tr>
          <th>totals</th>
          <td class="table-secondary"/>
          <td class="table-secondary"/>
          <td class="table-secondary"/>
          <td class="text-end<%= ' table-danger' unless storage_roots_moab_count_ok? %>"><%= storage_roots_moab_count %></td>
          <td class="text-end<%= ' table-danger' unless storage_roots_ok_count_ok? %>"><%= storage_roots_ok_count %></td>
          <td class="text-end<%= ' table-danger' unless storage_roots_invalid_moab_count_ok? %>"><%= storage_roots_invalid_moab_count %></td>
          <td class="text-end<%= ' table-danger' unless storage_roots_invalid_checksum_count_ok? %>"><%= storage_roots_invalid_checksum_count %></td>
          <td class="text-end<%= ' table-danger' unless storage_roots_moab_not_found_count_ok? %>"><%= storage_roots_moab_not_found_count %></td>
          <td class="text-end<%= ' table-danger' unless storage_roots_unexpected_version_count_ok? %>"><%= storage_roots_unexpected_version_count %></td>
          <td class="text-end<%= ' table-danger' unless storage_roots_validity_unknown_count_ok? %>"><%= storage_roots_validity_unknown_count %></td>
          <td class="text-end<%= ' table-warning' unless storage_roots_fixity_check_expired_count_ok? %>"><%= storage_roots_fixity_check_expired_count %></td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
